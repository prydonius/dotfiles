format = """
$os\
[ÓÇ¥](bg:#769ff0 fg:#a3aed2)\
$directory\
[ÓÇ¥](fg:#769ff0 bg:#394260)\
${custom.jj}${custom.jj_desc}\
${custom.git_branch}\
${custom.git_status}\
[ÓÇ¥](fg:#394260 bg:#212736)\
$nodejs\
$rust\
$golang\
$php\
$kubernetes\
[ÓÇ¥](fg:#212736 bg:#1d2230)\
$time\
[ÓÇ¥ ](fg:#1d2230)\
\n$character"""

[os]
disabled = false

[os.symbols]
Macos = "[ Óúë ](bg:#a3aed2 fg:#090c0c)"
Linux = "[ ÔÖº ](bg:#a3aed2 fg:#090c0c)"
NixOS = "[ Ôåì ](bg:#a3aed2 fg:#090c0c)"

[directory]
style = "fg:#e3e5e5 bg:#769ff0"
format = "[ $path ]($style)"
truncation_length = 3
truncation_symbol = "‚Ä¶/"

[directory.substitutions]
"Documents" = "Û∞àô "
"Downloads" = "ÔÄô "
"Music" = "ÔÄÅ "
"Pictures" = "ÔÄæ "

# jj (Jujutsu) VCS support
[custom.jj]
description = "The current jj change id and status"
detect_folders = [".jj"]
symbol = "Û∞úõ"
style = "bg:#394260"
command = '''
jj log --revisions @ --no-graph --ignore-working-copy --color never --limit 1 --template '
  separate(" ",
    change_id.shortest(4) ++ if(bookmarks.filter(|x| !x.synced()), "*", ""),
    if(conflict, "üí•"),
    if(divergent, "üöß"),
    "‚úé",
  )
'
'''
format = '[[ $symbol $output ](fg:#769ff0 bg:#394260)]($style)'

[custom.jj_desc]
description = "The current jj description"
detect_folders = [".jj"]
style = "bg:#394260"
command = '''
jj log --revisions @ --no-graph --ignore-working-copy --color never --limit 1 --template '
  if(empty, "(empty)", truncate_end(24, description.first_line(), "‚Ä¶"))
'
'''
format = '[[($output) ](fg:#a0a9cb bg:#394260)]($style)'

# Disable built-in git modules (we use custom ones that hide in jj repos)
[git_branch]
disabled = true
symbol = "Ôêò"
style = "bg:#394260"
format = '[[ $symbol $branch ](fg:#769ff0 bg:#394260)]($style)'

[git_status]
disabled = true
style = "bg:#394260"
format = '[[($all_status$ahead_behind )](fg:#769ff0 bg:#394260)]($style)'

[custom.git_branch]
when = "! jj --ignore-working-copy root"
command = "starship module git_branch"
description = "Only show git_branch if we're not in a jj repo"
format = "$output"

[custom.git_status]
when = "! jj --ignore-working-copy root"
command = "starship module git_status"
description = "Only show git_branch if we're not in a jj repo"
format = "$output"

[nodejs]
symbol = "Óúò"
style = "bg:#212736"
format = '[[ $symbol ($version) ](fg:#769ff0 bg:#212736)]($style)'

[rust]
symbol = "Óû®"
style = "bg:#212736"
format = '[[ $symbol ($version) ](fg:#769ff0 bg:#212736)]($style)'

[golang]
symbol = "Óòß"
style = "bg:#212736"
format = '[[ $symbol ($version) ](fg:#769ff0 bg:#212736)]($style)'

[php]
symbol = "Óòà"
style = "bg:#212736"
format = '[[ $symbol ($version) ](fg:#769ff0 bg:#212736)]($style)'

[kubernetes]
symbol = "‚ò∏"
style = "bg:#212736"
format = '[[ $symbol ($context)](fg:#769ff0 bg:#212736)/[($namespace) ](fg:#a0a9cb bg:#212736)]($style)'
disabled = false

[[kubernetes.contexts]]
# Using capture groups
# Contexts from GKE, AWS and other cloud providers usually carry additional information, like the region/zone.
# The following entry matches on the GKE format (`gke_projectname_zone_cluster-name`)
# and renames every matching kube context into a more readable format (`gke-cluster-name`):
context_pattern = "gke_(?P<project>[\\w-]+)_.*_(?P<cluster>[\\w-]+)"
context_alias = "$project/$cluster"

[time]
disabled = false
time_format = "%R" # Hour:Minute Format
style = "bg:#1d2230"
format = '[[ Ôê∫ $time ](fg:#a0a9cb bg:#1d2230)]($style)'
